// ColorBox v1.3.17.2 - a full featured, light-weight, customizable lightbox based on jQuery 1.3+
// Copyright (c) 2011 Jack Moore - jack@colorpowered.com
// Licensed under the MIT license: http://www.opensource.org/licenses/mit-license.php
(function(e,t,n){function V(n,r,i){i=t.createElement("div");if(n){i.id=s+n}i.style.cssText=r||"";return e(i)}function $(e,t){return Math.round((/%/.test(e)?(t==="x"?E.width():E.height())/100:1)*parseInt(e,10))}function J(e){return _.photo||/\.(gif|png|jpg|jpeg|bmp)(?:\?([^#]*))?(?:#(\.*))?$/i.test(e)}function K(t){_=e.extend({},e.data(j,i));for(t in _){if(e.isFunction(_[t])&&t.substring(0,2)!=="on"){_[t]=_[t].call(j)}}_.rel=_.rel||j.rel||"nofollow";_.href=_.href||e(j).attr("href");_.title=_.title||j.title;if(typeof _.href==="string"){_.href=e.trim(_.href)}}function Q(t,n){if(n){n.call(j)}e.event.trigger(t)}function G(){var e,t=s+"Slideshow_",n="click."+s,r,i,o;if(_.slideshow&&w[1]){r=function(){k.text(_.slideshowStop).unbind(n).bind(f,function(){if(F<w.length-1||_.loop){e=setTimeout(X.next,_.slideshowSpeed)}}).bind(a,function(){clearTimeout(e)}).one(n+" "+l,i);g.removeClass(t+"off").addClass(t+"on");e=setTimeout(X.next,_.slideshowSpeed)};i=function(){clearTimeout(e);k.text(_.slideshowStart).unbind([f,a,l,n].join(" ")).one(n,r);g.removeClass(t+"on").addClass(t+"off")};if(_.slideshowAuto){r()}else{i()}}else{g.removeClass(t+"off "+t+"on")}}function Y(t){if(!U){j=t;K();w=e(j);F=0;if(_.rel!=="nofollow"){w=e("."+o).filter(function(){var t=e.data(this,i).rel||this.rel;return t===_.rel});F=w.index(j);if(F===-1){w=w.add(j);F=w.length-1}}if(!q){q=R=true;g.show();if(_.returnFocus){try{j.blur();e(j).one(c,function(){try{this.focus()}catch(e){}})}catch(n){}}m.css({cursor:_.overlayClose?"pointer":"auto"}).show();_.w=$(_.initialWidth,"x");_.h=$(_.initialHeight,"y");X.position();if(d){E.bind("resize."+v+" scroll."+v,function(){m.css({width:E.width(),height:E.height(),top:E.scrollTop(),left:E.scrollLeft()})}).trigger("resize."+v)}Q(u,_.onOpen);M.add(N).hide();O.html(_.close).show()}X.load(true)}}var r={transition:"elastic",speed:300,width:false,initialWidth:"600",innerWidth:false,minWidth:false,maxWidth:false,height:false,initialHeight:"450",innerHeight:false,minHeight:false,maxHeight:false,scalePhotos:true,scrolling:true,inline:false,html:false,iframe:false,fastIframe:true,photo:false,href:false,title:false,rel:false,preloading:true,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",openNewWindowText:"open in new window",open:false,returnFocus:true,loop:true,slideshow:false,slideshowAuto:true,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:false,onLoad:false,onComplete:false,onCleanup:false,onClosed:false,overlayClose:true,escKey:true,arrowKey:true,top:false,bottom:false,left:false,right:false,fixed:false,data:false,displayVoting:false,votingUrl:""},i="colorbox",s="cbox",o=s+"Element",u=s+"_open",a=s+"_load",f=s+"_complete",l=s+"_cleanup",c=s+"_closed",h=s+"_purge",p=e.browser.msie&&!e.support.opacity,d=p&&e.browser.version<7,v=s+"_IE6",m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X;X=e.fn[i]=e[i]=function(t,n){var s=this;t=t||{};if(!s[0]){if(s.selector){return s}s=e("<a/>");t.open=true}if(n){t.onComplete=n}s.each(function(){e.data(this,i,e.extend({},e.data(this,i)||r,t));e(this).addClass(o)});if(e.isFunction(t.open)&&t.open.call(s)||t.open){Y(s[0])}return s};X.init=function(){E=e(n);g=V().attr({id:i,"class":p?s+(d?"IE6":"IE"):""});m=V("Overlay",d?"position:absolute":"").hide();y=V("Wrapper");b=V("Content").append(S=V("LoadedContent","width:0; height:0; overflow:hidden"),T=V("LoadingOverlay").add(V("LoadingGraphic")),$voting=V("Voting"),N=V("Title"),C=V("Current"),L=V("Next"),A=V("Previous"),k=V("Slideshow").bind(u,G),O=V("Close"),$open=V("Open"));y.append(b);x=V(false,"position:absolute; width:9999px; visibility:hidden; display:none");e("body").prepend(m,g.append(y,x));voting_positions_done=false;previous_title="";b.children().hover(function(){e(this).addClass("hover")},function(){e(this).removeClass("hover")}).addClass("hover");D=b.outerHeight(true)-b.height();P=b.outerWidth(true)-b.width();H=S.outerHeight(true);B=S.outerWidth(true);g.css({"padding-bottom":D,"padding-right":P}).hide();L.click(function(){X.next()});A.click(function(){X.prev()});O.click(function(){X.close()});$open.click(function(){X.close()});M=L.add(A).add(C).add(k);b.children().removeClass("hover");m.click(function(){if(_.overlayClose){X.close()}});e(t).bind("keydown."+s,function(e){var t=e.keyCode;if(q&&_.escKey&&t===27){e.preventDefault();X.close()}if(q&&_.arrowKey&&w[1]){if(t===37){e.preventDefault();A.click()}else if(t===39){e.preventDefault();L.click()}}})};X.remove=function(){g.add(m).remove();e("."+o).removeData(i).removeClass(o)};X.position=function(e,n){function o(e){b[0].style.width=e.style.width;T[0].style.height=T[1].style.height=b[0].style.height=e.style.height}var r=0,i=0;E.unbind("resize."+s);g.hide();if(_.fixed&&!d){g.css({position:"fixed"})}else{r=E.scrollTop();i=E.scrollLeft();g.css({position:"absolute"})}if(_.right!==false){i+=Math.max(E.width()-_.w-B-P-$(_.right,"x"),0)}else if(_.left!==false){i+=$(_.left,"x")}else{i+=Math.round(Math.max(E.width()-_.w-B-P,0)/2)}if(_.bottom!==false){r+=Math.max(t.documentElement.clientHeight-_.h-H-D-$(_.bottom,"y"),0)}else if(_.top!==false){r+=$(_.top,"y")}else{r+=Math.round(Math.max(t.documentElement.clientHeight-_.h-H-D,0)/2)}g.show();e=g.width()===_.w+B&&g.height()===_.h+H?0:e||0;y[0].style.width=y[0].style.height="9999px";g.dequeue().animate({width:_.w+B,height:_.h+H,top:r,left:i},{duration:e,complete:function(){o(this);R=false;y[0].style.width=_.w+B+P+"px";y[0].style.height=_.h+H+D+"px";if(n){n()}setTimeout(function(){E.bind("resize."+s,X.position)},1)},step:function(){o(this)}});if(S.width()<380){C.hide();k.hide()}};X.resize=function(e){if(q){e=e||{};if(e.width){_.w=$(e.width,"x")-B-P}if(e.innerWidth){_.w=$(e.innerWidth,"x")}S.css({width:_.w});if(e.height){_.h=$(e.height,"y")-H-D}if(e.innerHeight){_.h=$(e.innerHeight,"y")}if(!e.innerHeight&&!e.height){var t=S.wrapInner("<div style='overflow:auto'></div>").children();_.h=t.height();t.replaceWith(t.children())}S.css({height:_.h});X.position(_.transition==="none"?0:_.speed)}};X.prep=function(t){function o(){_.w=_.w||S.width();_.w=_.mw&&_.mw<_.w?_.mw:_.w;_.w=_.minWidth&&_.minWidth>_.w?_.minWidth:_.w;return _.w}function u(){_.h=_.h||S.height();_.h=_.mh&&_.mh<_.h?_.mh:_.h;_.h=_.minHeight&&_.minHeight>_.h?_.minHeight:_.h;return _.h}if(!q){return}var n,r=_.transition==="none"?0:_.speed;S.remove();S=V("LoadedContent").append(t);S.hide().appendTo(x.show()).css({width:o(),overflow:_.scrolling?"auto":"hidden"}).css({height:u()}).prependTo(b);x.hide();e(I).css({"float":"none"});if(d){e("select").not(g.find("select")).filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one(l,function(){this.style.visibility="inherit"})}n=function(){function d(){if(p){g[0].style.removeAttribute("filter")}}var t,n,o,u,a=w.length,l,c;if(!q){return}c=function(){clearTimeout(W);T.hide();Q(f,_.onComplete)};if(p){if(I){S.fadeIn(100)}}N.attr("title",_.title);N.html(_.title).add(S).show();if(a>1){if(typeof _.current==="string"&&S.width()>380){C.html(_.current.replace("{current}",F+1).replace("{total}",a)).show()}L[_.loop||F<a-1?"show":"hide"]().html(_.next);A[_.loop||F?"show":"hide"]().html(_.previous);t=F?w[F-1]:w[a-1];o=F<a-1?w[F+1]:w[0];if(_.slideshow&&S.width()>380){k.show()}if(_.preloading){u=e.data(o,i).href||o.href;n=e.data(t,i).href||t.href;u=e.isFunction(u)?u.call(o):u;n=e.isFunction(n)?n.call(t):n;if(J(u)){e("<img/>")[0].src=u}if(J(n)){e("<img/>")[0].src=n}}}else{M.hide()}if(_.iframe){l=e("<iframe/>").addClass(s+"Iframe")[0];if(_.fastIframe){c()}else{e(l).one("load",c)}l.name=s+ +(new Date);l.src=_.href;if(!_.scrolling){l.scrolling="no"}if(p){l.frameBorder=0;l.allowTransparency="true"}e(l).appendTo(S).one(h,function(){l.src="//about:blank"})}else{c()}if(_.transition==="fade"){g.fadeTo(r,1,d)}else{d()}};if(_.transition==="fade"){g.fadeTo(r,0,function(){X.position(0,n)})}else{X.position(r,n)}};X.load=function(t){var n,r,i=X.prep;R=true;I=false;j=w[F];if(!t){K()}Q(h);Q(a,_.onLoad);if(previous_title==""&&_.title!=""||previous_title!=""&&_.title==""){var o=0;if(_.title!==""){var u=0;if(_.displayVoting&&_.votingUrl!=""){u=$voting.outerHeight()}N.css("margin-bottom",u+O.outerHeight()-3);o=15}else{o=-15}S.css("margin-bottom",parseInt(S.css("margin-bottom"))+o);H+=o}previous_title=_.title;if(_.displayVoting&&_.votingUrl!=""&&j.id!=""){if(!voting_positions_done){S.css("margin-bottom",parseInt(S.css("margin-bottom"))+$voting.outerHeight());H=S.outerHeight(true);voting_positions_done=true}init_voting_bar($voting,_.votingUrl,j.id,true)}_.h=_.height?$(_.height,"y")-H-D:_.innerHeight&&$(_.innerHeight,"y");_.w=_.width?$(_.width,"x")-B-P:_.innerWidth&&$(_.innerWidth,"x");_.mw=_.w;_.mh=_.h;if(_.maxWidth){_.mw=$(_.maxWidth,"x")-B-P;_.mw=_.w&&_.w<_.mw?_.w:_.mw}if(_.maxHeight){_.mh=$(_.maxHeight,"y")-H-D;_.mh=_.h&&_.h<_.mh?_.h:_.mh}n=_.href;W=setTimeout(function(){T.show()},100);if(_.inline){V().hide().insertBefore(e(n)[0]).one(h,function(){e(this).replaceWith(S.children())});i(e(n))}else if(_.iframe){i(" ")}else if(_.html){i(_.html)}else if(J(n)){e(I=new Image).addClass(s+"Photo").error(function(){_.title=false;i(V("Error").text("This image could not be loaded"))}).load(function(){var e;I.onload=null;if(_.scalePhotos){r=function(){I.height-=I.height*e;I.width-=I.width*e};if(_.mw&&I.width>_.mw){e=(I.width-_.mw)/I.width;r()}if(_.mh&&I.height>_.mh){e=(I.height-_.mh)/I.height;r()}}if(_.h){I.style.marginTop=Math.max(_.h-I.height,0)/2+"px"}if(w[1]&&(F<w.length-1||_.loop)){var t=false;var n=0;var s=0;var o=I.naturalWidth>I.width*1.1||I.naturalHeight>I.height*1.1;if(o){I.className=I.className+" zoomin"}I.onclick=function(e){if(!o){X.next()}else{if(t){I.className=I.className.replace(/zoomout/,"");I.width=n;I.height=s}else{var r=jQuery(this).offset();var i=(e.pageX-r.left)/jQuery(this).width();var u=(e.pageY-r.top)/jQuery(this).height();I.className=I.className+" zoomout";n=I.width;s=I.height;I.removeAttribute("width");I.removeAttribute("height");var a=jQuery(this).parent()[0];jQuery(this).parent().scrollLeft(i*(a.scrollWidth-a.clientWidth)).scrollTop(u*(a.scrollHeight-a.clientHeight))}t=t?false:true}}}if(p){I.style.msInterpolationMode="bicubic"}setTimeout(function(){i(I)},1)});setTimeout(function(){I.src=n},1);$open.html('<a href="'+n+'" target="_blank">'+_.openNewWindowText+"</a>").show()}else if(n){x.load(n,_.data,function(t,n,r){i(n==="error"?V("Error").text("Request unsuccessful: "+r.statusText):e(this).contents())})}};X.next=function(){if(!R&&w[1]&&(F<w.length-1||_.loop)){F=F<w.length-1?F+1:0;X.load()}};X.prev=function(){if(!R&&w[1]&&(F||_.loop)){F=F?F-1:w.length-1;X.load()}};X.close=function(){if(q&&!U){U=true;q=false;Q(l,_.onCleanup);E.unbind("."+s+" ."+v);m.fadeTo(200,0);g.stop().fadeTo(300,0,function(){g.add(m).css({opacity:1,cursor:"auto"}).hide();Q(h);S.remove();setTimeout(function(){U=false;Q(c,_.onClosed)},1)})}};X.element=function(){return e(j)};X.settings=r;z=function(e){if(!(e.button!==0&&typeof e.button!=="undefined"||e.ctrlKey||e.shiftKey||e.altKey)){e.preventDefault();Y(this)}};if(e.fn.delegate){e(t).delegate("."+o,"click",z)}else{e(t).on("click","."+o,z)}e(X.init)})(jQuery,document,this)