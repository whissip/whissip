(function(){tinymce.PluginManager.requireLangPack("more");tinymce.create("tinymce.plugins.MorePlugin",{init:function(b,d){var f='<img src="'+d+'/img/trans.gif" class="mceMore mceItemNoResize" />',a="mceMore",c=b.getParam("More_separator","<!--more-->"),e;e=new RegExp(c.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,function(g){return"\\"+g}),"g");b.addCommand("mceMore",function(){b.execCommand("mceInsertContent",0,f)});b.addButton("morebtn",{title:"moreseparator.desc",cmd:a,image:d+"/img/morebtn.gif"});b.onInit.add(function(){if(b.settings.content_css!==false){b.dom.loadCSS(d+"/css/content.css")}if(b.theme.onResolveName){b.theme.onResolveName.add(function(g,h){if(h.node.nodeName=="IMG"&&b.dom.hasClass(h.node,a)){h.name="more"}})}});b.onClick.add(function(g,h){h=h.target;if(h.nodeName==="IMG"&&g.dom.hasClass(h,a)){g.selection.select(h)}});b.onNodeChange.add(function(h,g,i){g.setActive("more",i.nodeName==="IMG"&&h.dom.hasClass(i,a))});b.onBeforeSetContent.add(function(g,h){h.content=h.content.replace(e,f)});b.onPostProcess.add(function(g,h){if(h.get){h.content=h.content.replace(/<img[^>]+>/g,function(i){if(i.indexOf('class="mceMore')!==-1){i=c}return i})}})},createControl:function(b,a){return null},getInfo:function(){return{longname:"More",author:"Francois Planque",authorurl:"http://fplanque.com",infourl:"http://b2evolution.net",version:"0.1"}}});tinymce.PluginManager.add("more",tinymce.plugins.MorePlugin)})();